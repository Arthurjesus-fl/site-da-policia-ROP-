<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Painel de Estatísticas</title>
  <!-- Carrega Tailwind CSS para um design moderno e responsivo -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Configuração do Tailwind para fonte e cores customizadas -->
  <style>
    :root {
      font-family: 'Inter', sans-serif;
    }
    /* Estilo customizado para garantir que o menu não tenha sublinhado */
    .menu a {
        text-decoration: none;
    }
  </style>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            // Definição de cores baseadas nas cores originais e tendências
            'primary': '#003399', // Azul Escuro Principal
            'secondary': '#36A2EB', // Azul Claro para Sucesso/Finalizado
            'accent': '#FF6384', // Vermelho/Rosa para Alerta/Pendente
            'background': '#f5f7fa', // Fundo Suave
          }
        }
      }
    }
  </script>
</head>
<body class="bg-background min-h-screen flex flex-col items-center p-4">

  <!-- Título Principal -->
  <header class="w-full max-w-4xl mb-6">
    <h1 class="text-3xl font-extrabold text-primary text-center">Painel de Estatísticas do ROP</h1>
  </header>

  <!-- Navegação (Menu) - Estilizado como botões com transição -->
  <nav class="w-full max-w-4xl mb-8 flex flex-wrap justify-center gap-4">
    <a href="comentarios.html" class="px-4 py-2 bg-white text-primary border border-primary rounded-lg font-semibold hover:bg-primary hover:text-white transition duration-300 shadow-md">Comentários</a>
    <a href="etapa1.html" class="px-4 py-2 bg-white text-primary border border-primary rounded-lg font-semibold hover:bg-primary hover:text-white transition duration-300 shadow-md">Etapa 1</a>
    <a href="etapa2.html" class="px-4 py-2 bg-white text-primary border border-primary rounded-lg font-semibold hover:bg-primary hover:text-white transition duration-300 shadow-md">Etapa 2</a>
    <a href="etapa3.html" class="px-4 py-2 bg-white text-primary border border-primary rounded-lg font-semibold hover:bg-primary hover:text-white transition duration-300 shadow-md">Etapa 3</a>
  </nav>

  <!-- Dashboard Principal (Layout em Grade) -->
  <main class="w-full max-w-4xl grid grid-cols-1 gap-6">

    <!-- Mini-Cards de KPIs (Indicadores Chave) -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <!-- KPI Total -->
        <div class="bg-primary text-white p-5 rounded-xl shadow-lg flex flex-col items-start justify-center">
            <span class="text-sm font-light opacity-80">ROPs Este Mês</span>
            <span class="text-4xl font-bold mt-1">247</span>
        </div>
        <!-- KPI Pendentes -->
        <div class="bg-accent text-white p-5 rounded-xl shadow-lg flex flex-col items-start justify-center">
            <span class="text-sm font-light opacity-80">Pendentes</span>
            <span class="text-4xl font-bold mt-1">18</span>
        </div>
        <!-- KPI Finalizados -->
        <div class="bg-secondary text-white p-5 rounded-xl shadow-lg flex flex-col items-start justify-center">
            <span class="text-sm font-light opacity-80">Finalizados</span>
            <span class="text-4xl font-bold mt-1">229</span>
        </div>
    </div>


    <!-- Seção de Gráficos (Grid: Donut 1/3, Barras 2/3) -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        
        <!-- Gráfico de Pizza/Donut (Progresso) -->
        <div class="lg:col-span-1 bg-white p-6 rounded-xl shadow-xl flex flex-col">
            <h2 class="text-xl font-semibold mb-4 text-primary">Status do Processamento</h2>
            <div class="relative h-64 flex-grow">
                <canvas id="graficoPizza"></canvas>
            </div>
        </div>

        <!-- Gráfico de Barras (Ocorrências por Tipo) -->
        <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-xl flex flex-col">
            <h2 class="text-xl font-semibold mb-4 text-primary">Distribuição de Ocorrências</h2>
            <div class="relative h-80 flex-grow">
                <canvas id="graficoBarras"></canvas>
            </div>
        </div>
    </div>

  </main>

  <!-- Script Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    // Dados de exemplo (mantidos)
    const dadosPendentes = 18;
    const dadosFinalizados = 229;
    const labelsOcorrencias = ['Furto', 'Roubo', 'Tráfico', 'Homicídio', 'Outros'];
    const dadosOcorrencias = [50, 30, 80, 15, 72];

    // 1. Gráfico de Donut (Status de Processamento)
    const ctxPizza = document.getElementById('graficoPizza').getContext('2d');
    new Chart(ctxPizza, {
      type: 'doughnut',
      data: {
        labels: ['Pendentes', 'Finalizados'],
        datasets: [{
          data: [dadosPendentes, dadosFinalizados],
          backgroundColor: ['#FF6384', '#36A2EB'], // Cores do Tailwind: accent, secondary
          hoverBackgroundColor: ['#FF4C6F', '#2C8CD3']
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false, // Importante para o layout flexível
        plugins: {
          legend: { position: 'bottom' }, // Mover legenda para baixo
          title: { display: false },
          tooltip: {
            callbacks: {
              // Adiciona porcentagem ao tooltip
              label: function(context) {
                let label = context.label || '';
                if (label) { label += ': '; }
                const value = context.parsed;
                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                const percentage = ((value / total) * 100).toFixed(1) + '%';
                return label + value + ' (' + percentage + ')';
              }
            }
          }
        }
      }
    });

    // 2. Gráfico de Barras (Distribuição de Ocorrências)
    const ctxBarras = document.getElementById('graficoBarras').getContext('2d');
    new Chart(ctxBarras, {
      type: 'bar',
      data: {
        labels: labelsOcorrencias,
        datasets: [{
          label: 'Quantidade de Ocorrências',
          data: dadosOcorrencias,
          backgroundColor: '#003399', // Cor do Tailwind: primary
          borderColor: '#002266',
          borderWidth: 1,
          borderRadius: 4
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false, // Importante para o layout flexível
        plugins: {
          legend: { display: false },
          title: { display: false }
        },
        scales: {
          y: {
            beginAtZero: true,
            title: {
              display: true,
              text: 'Nº de Ocorrências'
            },
            grid: {
                color: 'rgba(0, 0, 0, 0.05)'
            }
          },
          x: {
            grid: {
                display: false
            }
          }
        }
      }
    });
  </script>
</body>
</html>